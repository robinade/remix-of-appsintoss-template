# 🚀 앱인토스 미니앱 출시 완전 가이드

> **이 문서만 따라하면 앱인토스에 미니앱을 출시할 수 있습니다!**
>
> 초보자도 쉽게 따라할 수 있도록 A부터 Z까지 모든 단계를 상세히 설명합니다.

---

## 📋 목차

1. [시작하기 전에](#1-시작하기-전에)
2. [1단계: 앱인토스 콘솔 가입](#2-1단계-앱인토스-콘솔-가입)
3. [2단계: 워크스페이스 생성](#3-2단계-워크스페이스-생성)
4. [3단계: 앱 등록하기](#4-3단계-앱-등록하기)
5. [4단계: 앱 정보 설정](#5-4단계-앱-정보-설정)
6. [5단계: 개발 환경 설정](#6-5단계-개발-환경-설정)
7. [6단계: 앱 개발하기](#7-6단계-앱-개발하기)
8. [7단계: 테스트하기](#8-7단계-테스트하기)
9. [8단계: 사업자 등록 (선택)](#9-8단계-사업자-등록-선택)
10. [9단계: 앱 정보 검토 요청](#10-9단계-앱-정보-검토-요청)
11. [10단계: 앱 번들 업로드](#11-10단계-앱-번들-업로드)
12. [11단계: 출시 검토 요청](#12-11단계-출시-검토-요청)
13. [12단계: 출시하기](#13-12단계-출시하기)
14. [출시 후 관리](#14-출시-후-관리)
15. [자주 묻는 질문 (FAQ)](#15-자주-묻는-질문-faq)

---

## 1. 시작하기 전에

### 출시까지 예상 소요 시간

| 단계 | 예상 시간 | 비고 |
|------|----------|------|
| 콘솔 가입 ~ 앱 등록 | 30분 | 서류 준비 시간 제외 |
| 개발 | 1일 ~ 수주 | 앱 복잡도에 따라 다름 |
| 테스트 | 1-3일 | 충분히 테스트 권장 |
| 앱 정보 검토 | 1-2 영업일 | 앱인토스 검토 |
| 사업자 등록 (선택) | 1-2 영업일 | 사업자 인증 포함 |
| 출시 검토 | 최대 3 영업일 | 앱인토스 검토 |

### 필수 준비물

- [ ] **만 19세 이상**의 본인 명의 토스 앱
- [ ] **앱 아이콘** (600x600px, PNG, 정방형, 모서리 둥글게 불가)
- [ ] **앱 이름** (한글 권장)
- [ ] **고객센터 연락처** (이메일, 전화번호 또는 채팅 상담 링크)

### 사업자가 필요한 경우 (선택)

아래 기능을 사용하려면 **사업자 등록**이 필요합니다:
- 토스 로그인
- 토스페이 결제
- 인앱 결제
- 인앱 광고
- 프로모션 (토스 포인트)

> 💡 **팁**: 사업자가 없어도 기본 앱은 출시할 수 있습니다!

---

## 2. 1단계: 앱인토스 콘솔 가입

### 콘솔 접속

1. [앱인토스 콘솔](https://console-apps-in-toss.toss.im) 접속
2. **토스 비즈니스 회원**으로 가입

### 가입 조건

- 만 19세 이상
- 본인 명의 토스 앱 필요 (본인 인증용)

### 가입 완료 확인

가입이 완료되면 워크스페이스 생성 화면이 나타납니다.

---

## 3. 2단계: 워크스페이스 생성

### 워크스페이스란?

팀원들과 함께 프로젝트를 관리할 수 있는 공간입니다.

### 생성 방법

1. 워크스페이스 이름 입력 (예: `내 서비스`, `우리팀`)
2. 생성 완료

### 주의사항

- 사업자당 **1개**의 워크스페이스만 생성 가능
- 이름은 나중에 수정 가능
- 생성자가 자동으로 **대표관리자**가 됨

### 팀원 초대 (선택)

1. `멤버` 메뉴 클릭
2. `+초대하기` 버튼 클릭
3. 이메일 입력 후 권한 선택
   - **관리자**: 모든 권한 (멤버 관리, 설정 변경 등)
   - **구성원**: 공동 작업만 가능

---

## 4. 3단계: 앱 등록하기

### 앱 등록 화면 접근

1. `앱` 메뉴 클릭
2. `+등록하기` 버튼 클릭

### 필수 입력 정보

#### 1) 앱 로고

**규격:**
- 크기: **600 x 600px** (정방형)
- 형식: PNG
- 배경: 필수 (투명 배경 불가)
- 모서리: **둥글게 불가** (각진 형태)

**가이드라인:**
- 작은 화면에서도 선명하게 보여야 함
- 라이트/다크 모드 모두에서 잘 보이는 배경색 사용
- 다른 앱과 혼동되지 않는 고유한 디자인

> 📎 **로고 가이드 PDF**: [앱 로고 가이드](/resources/prepare/logo_guide.pdf)

#### 2) 앱 이름

```
예시: 할일 관리, 나의 서비스, 토이쇼핑
```

- 한글 권장
- 서비스 성격이 바로 이해되도록 작성
- 나중에 수정 가능

#### 3) appName (앱 ID)

```
예시: todo-app, my-service, toy-shopping
```

- 영문 소문자, 숫자, 하이픈만 사용
- 딥링크 주소에 사용됨: `intoss://{appName}`
- **⚠️ 한 번 등록 후 수정 불가!** 신중하게 입력하세요

#### 4) 사용 연령

- 현재 앱인토스는 **만 19세 이상** 고객에게만 제공

#### 5) 고객센터 정보

- 이메일 (필수)
- 전화번호 (선택)
- 채팅 상담 주소 (선택)

---

## 5. 4단계: 앱 정보 설정

### granite.config.ts 수정

이 템플릿의 `granite.config.ts` 파일을 열어 앱 정보를 수정합니다:

```typescript
export default defineConfig({
  // ⚠️ 콘솔에서 등록한 appName과 정확히 일치해야 함!
  appName: 'your-app-name',
  
  brand: {
    // 화면에 표시되는 이름
    displayName: '나의 앱 이름',
    
    // 브랜드 컬러 (HEX)
    primaryColor: '#3182F6',
    
    // ⚠️ 필수! 600x600px 아이콘 URL
    icon: 'https://your-domain.com/app-icon.png',
    
    bridgeColorMode: 'basic',
  },
  
  // 필요한 권한만 추가
  permissions: [],
  
  outdir: 'dist',
  
  webViewProps: {
    type: 'partner', // 일반 앱은 'partner', 게임은 'game'
  },
});
```

### src/template.config.ts 수정

```typescript
export const templateConfig = {
  appName: '나의 앱 이름',
  appId: 'your-app-name', // granite.config.ts의 appName과 동일
  version: '1.0.0',
  description: '앱 설명을 입력하세요',
  
  theme: {
    primaryColor: '#3182F6', // granite.config.ts의 primaryColor와 동일
    // ... 기타 테마 설정
  },
  
  deepLink: {
    production: 'intoss://your-app-name',
    sandbox: 'intoss-private://your-app-name',
  },
};
```

### 설정 동기화 체크

```bash
# 출시 준비 상태 자동 검증
npm run check:publish
```

---

## 6. 5단계: 개발 환경 설정

### 의존성 설치

```bash
npm install
```

### 개발 서버 실행

```bash
# 로컬 브라우저에서 개발
npm run dev

# 앱인토스 샌드박스에서 테스트
npm run granite:dev
```

### 프로젝트 구조 이해

```
├── granite.config.ts      # ⭐ 앱인토스 핵심 설정
├── src/
│   ├── template.config.ts # ⭐ 앱 테마 및 설정
│   ├── features/
│   │   └── home/
│   │       └── HomeScreen.tsx  # ✏️ 메인 화면
│   ├── hooks/
│   │   └── useAppsInToss.ts    # SDK 통합 훅
│   └── lib/
│       └── appsintoss/         # SDK 래퍼 유틸리티
```

---

## 7. 6단계: 앱 개발하기

### 앱인토스 가이드라인 필수 준수

#### ✅ 반드시 지켜야 할 것

| 항목 | 요구사항 | 이 템플릿 상태 |
|------|---------|---------------|
| 시스템 모드 | 라이트 모드만 | ✅ 적용됨 |
| 핀치줌 | user-scalable=no | ✅ index.html에 설정 |
| 네비게이션 바 | 커스텀 헤더 금지 | ✅ 앱인토스 자동 제공 |
| 응답 속도 | 2초 이상 지연 금지 | ⚠️ 직접 확인 필요 |
| 데이터 유지 | 재접속 시 유지 | ✅ 네이티브 스토리지 사용 |
| 터치 영역 | 최소 44px | ✅ 모든 버튼 적용 |
| 명도 대비 | 충분한 대비 | ✅ TDS 컬러 사용 |
| 외부 링크 | 자사 앱/웹 유도 금지 | ✅ 외부 링크 없음 |

#### ❌ 절대 하지 말 것

- 커스텀 네비게이션 바 만들기
- 다크 모드 지원
- 토스 로그인 외 다른 로그인 방식 사용
- 토스페이 외 다른 결제 수단 사용
- 자사 앱/웹으로 유도하는 버튼/링크

### SDK 기능 사용

```tsx
import { useAppsInToss } from '@/hooks/useAppsInToss';

function MyComponent() {
  const { 
    haptic,           // 햅틱 피드백
    shareMessage,     // 공유하기
    setStorageJSON,   // 데이터 저장
    getStorageJSON,   // 데이터 불러오기
    isAppsInToss,     // 앱인토스 환경 여부
  } = useAppsInToss();
  
  // 사용 예시
  const handleClick = async () => {
    await haptic('tap');
    // ... 로직
  };
}
```

---

## 8. 7단계: 테스트하기

### 로컬 브라우저 테스트

```bash
npm run dev
```

### 샌드박스 앱 테스트 (권장)

1. **샌드박스 앱 설치**
   - iOS: TestFlight에서 앱인토스 샌드박스 설치
   - Android: APK 다운로드 또는 스토어에서 설치

2. **개발 서버 실행**
   ```bash
   npm run granite:dev
   ```

3. **샌드박스에서 접속**
   - 샌드박스 앱 열기
   - `intoss-private://your-app-name` 입력

### 실기기 테스트 (Android)

```bash
# ADB 포트 포워딩
adb reverse tcp:8081 tcp:8081
adb reverse tcp:5173 tcp:5173

# 개발 서버 실행
npm run granite:dev
```

### 토스 앱 QR 테스트

콘솔에서 앱 번들을 업로드한 후:
1. 콘솔 → 앱 출시 → QR 코드 테스트
2. 토스 앱으로 QR 스캔
3. 실제 토스 앱 환경에서 테스트

---

## 9. 8단계: 사업자 등록 (선택)

> 💡 **사업자가 없어도 기본 앱은 출시 가능합니다!**
> 
> 토스 로그인, 결제, 광고 등 수익화 기능이 필요한 경우에만 사업자 등록이 필요합니다.

### 사업자별 필요 서류

#### 법인 사업자

| 서류 | 대표자 본인 | 대리인 |
|------|-----------|--------|
| 사업자 등록증 | ✅ | ✅ |
| 사업자 등기부등본 (3개월 이내) | ✅ | ✅ |
| 법인 인감증명서 | - | ✅ |
| 대리인 위임장 | - | ✅ |
| 대리인 신분증 사본 | - | ✅ |

#### 개인 사업자

| 서류 | 대표자 본인 | 대리인 |
|------|-----------|--------|
| 사업자 등록증 | ✅ | ✅ |
| 개인 인감증명서 | - | ✅ |
| 대리인 위임장 | - | ✅ |
| 대리인 신분증 사본 | - | ✅ |

### 등록 방법

1. 콘솔 → 워크스페이스 → 파트너 정보
2. 사업자 정보 `등록하기` 클릭
3. 서류 업로드 후 검토 요청
4. 검토 완료 (영업일 1-2일)
5. 계약 약관 동의 (이메일로 안내)

---

## 10. 9단계: 앱 정보 검토 요청

앱 번들 업로드 전, 앱 정보 검토를 먼저 받아야 합니다.

### 검토 항목

- 앱 로고 (규격, 가시성)
- 앱 이름 (적절성)
- 사용 연령 설정
- 고객센터 정보

### 검토 요청 방법

1. 콘솔 → 앱 → 앱 정보
2. 모든 필수 정보 입력 확인
3. `검토 요청하기` 버튼 클릭
4. 검토 완료 대기 (영업일 1-2일)

### 반려 시

- 반려 사유 확인 (콘솔 + 이메일)
- 문제 수정 후 재요청

---

## 11. 10단계: 앱 번들 업로드

### 빌드하기

```bash
npm run granite:build
```

빌드 결과물: `.ait` 파일 (압축된 앱 번들)

### 용량 제한

- **압축 해제 기준 100MB 이하**
- 대용량 리소스는 CDN 사용 권장

### 업로드 방법

1. 콘솔 → 앱 출시
2. `앱 번들 업로드` 클릭
3. `.ait` 파일 선택
4. 업로드 완료

### 업로드 전 체크리스트

```bash
# 자동 검증
npm run check:publish
```

또는 [CHECKLIST.md](./CHECKLIST.md) 수동 확인

---

## 12. 11단계: 출시 검토 요청

### 검토 조건

- 앱 정보 검토 완료
- 사업자 인증 완료 (수익화 기능 사용 시)
- 테스트 1회 이상 완료 (QR 테스트)

### 검토 요청

1. 콘솔 → 앱 출시
2. `검토 요청하기` 버튼 클릭
3. 검토 대기 (영업일 최대 3일)

### 검토 중 수정이 필요한 경우

1. `요청 취소하기` 클릭
2. 문제 수정
3. 새 번들 업로드
4. 다시 검토 요청

### 반려 시

1. `반려사유 보기` 버튼 클릭
2. 문제 해결
3. 새 번들 업로드 후 재요청
4. 추가 문의: [채널톡](https://apps-in-toss.channel.io/workflows/787658)

---

## 13. 12단계: 출시하기

### 출시 버튼 클릭

검토 승인 후:
1. 콘솔 → 앱 출시
2. `출시하기` 버튼 클릭

### ⚠️ 주의사항

- **출시 즉시 전체 사용자에게 반영됩니다!**
- 반드시 충분한 테스트 후 출시하세요
- 실제 환경은 테스트 환경과 다를 수 있습니다

### 실제 환경 확인 사항

- CORS 정책 동작
- 권한 처리
- 로그인/세션 유지
- 결제/인증 기능
- 메모리/리소스 사용량

---

## 14. 출시 후 관리

### 버전 업데이트

1. 코드 수정
2. `npm run granite:build`
3. 새 번들 업로드
4. 검토 요청 → 승인 → 출시

### 롤백

문제 발생 시:
1. 콘솔 → 앱 출시
2. 이전 버전 선택
3. `출시하기` 클릭

### 긴급 수정 (핫픽스)

심각한 오류 발생 시:
- [채널톡](https://apps-in-toss.channel.io/workflows/787658)으로 즉시 문의

### 모니터링 권장 항목

- 오류 로그 (Sentry 연동 권장)
- API 응답 지연/실패율
- 사용자 피드백 (신고 내역)
- 리소스 로딩 이슈

---

## 15. 자주 묻는 질문 (FAQ)

### Q: 사업자가 없어도 출시할 수 있나요?

**A:** 네! 기본 앱은 사업자 없이 출시 가능합니다. 단, 토스 로그인, 결제, 광고 등 수익화 기능은 사업자 등록이 필요합니다.

### Q: 앱 아이콘이 없어도 출시할 수 있나요?

**A:** 아니요. 앱 아이콘은 필수입니다. 600x600px PNG 파일을 준비하세요.

### Q: appName은 나중에 변경할 수 있나요?

**A:** 아니요. appName은 한 번 등록하면 수정할 수 없습니다. 신중하게 입력하세요.

### Q: 검토는 얼마나 걸리나요?

**A:**
- 앱 정보 검토: 영업일 1-2일
- 출시 검토: 영업일 최대 3일

### Q: 다크 모드를 지원하고 싶어요

**A:** 현재 앱인토스는 라이트 모드만 지원합니다. 다크 모드 지원 시 공지될 예정입니다.

### Q: 토스 로그인 외 다른 로그인을 사용하고 싶어요

**A:** 불가능합니다. 앱인토스에서는 토스 로그인만 사용할 수 있습니다.

### Q: 용량이 100MB를 초과해요

**A:** 대용량 리소스(이미지, 음악, 영상)는 CDN에 업로드하고 런타임에 다운로드하세요.

### Q: 테스트는 어떻게 하나요?

**A:**
1. 로컬 브라우저: `npm run dev`
2. 샌드박스 앱: `npm run granite:dev` 후 샌드박스에서 접속
3. QR 테스트: 번들 업로드 후 콘솔에서 QR 코드 생성

---

## 📚 참고 링크

- [앱인토스 개발자 센터](https://developers-apps-in-toss.toss.im/)
- [비게임 출시 가이드](https://developers-apps-in-toss.toss.im/checklist/app-nongame.md)
- [게임 출시 가이드](https://developers-apps-in-toss.toss.im/checklist/app-game.md)
- [콘솔에서 앱 등록하기](https://developers-apps-in-toss.toss.im/prepare/console-workspace.md)
- [사업자 등록하기](https://developers-apps-in-toss.toss.im/prepare/register-business.md)
- [미니앱 출시](https://developers-apps-in-toss.toss.im/development/deploy.md)
- [미니앱 브랜딩 가이드](https://developers-apps-in-toss.toss.im/design/miniapp-branding-guide.md)
- [다크패턴 방지 정책](https://developers-apps-in-toss.toss.im/design/consumer-ux-guide.md)
- [채널톡 문의](https://apps-in-toss.channel.io/workflows/787658)

---

**🎉 축하합니다! 이제 앱인토스에 미니앱을 출시할 준비가 되었습니다!**
